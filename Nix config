{ config, pkgs, ... }:

{
  # Import the hardware configuration
  imports =
    [
      ./hardware-configuration.nix
    ];

  # Set the system state version (adjust to your version of NixOS)
  system.stateVersion = "23.05";

  # Hostname
  networking.hostName = "nixos"; # Replace with your desired hostname

  # Enable networking
  networking.useDHCP = true;

  # Enable parallel downloads
  nix.settings.max-parallel-downloads = 10;

  # Enable Wayland and Hyprland
  services.xserver.enable = true;
  services.xserver.displayManager.lightdm.enable = false; # Disable LightDM
  services.xserver.windowManager.default = "none"; # No default X11 WM
  environment.systemPackages = with pkgs; [
    hyprland             # Hyprland compositor
    wayland              # Core Wayland libraries
    xwayland             # XWayland for X11 apps
    alacritty            # Terminal emulator
    neovim               # Text editor
    firefox              # Web browser
    wl-clipboard         # Wayland clipboard utilities
    grim                 # Wayland screenshot tool
    slurp                # Wayland region selector
    mako                 # Notification daemon
    playerctl            # Media player control
    networkmanager       # Network Manager
    git                  # Git version control
    unzip                # File extraction utility
  ];

  # Enable sound
  sound.enable = true;
  hardware.pulseaudio.enable = true;

  # Set your timezone
  time.timeZone = "Etc/UTC"; # Replace with your local timezone (e.g., "America/New_York")

  # Configure users
  users.users.alimussa = {
    isNormalUser = true;
    extraGroups = [ "wheel" "audio" "video" "input" ]; # Add to essential groups
    packages = with pkgs; [ hyprland ]; # Additional user-specific packages
  };

  # Configure SDDM (optional display manager for graphical login)
  services.xserver.displayManager.sddm.enable = true;

  # Enable NetworkManager
  networking.networkmanager.enable = true;

  # Enable Udev rules for input devices
  services.udev.packages = [ pkgs.usbutils ];

  # Configure GRUB bootloader
  boot.loader.grub.enable = true;
  boot.loader.grub.version = 2;
  boot.loader.grub.devices = [ "/dev/sda" ]; # Replace with your actual boot disk

  # Optional: Enable Flatpak
  services.flatpak.enable = true;
}
